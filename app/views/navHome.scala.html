@import java.time.LocalDateTime
@import models.relationships.Follows
@(user:User)(implicit form: DynamicForm, request: play.mvc.Http.Request)

@layouts.main("Home") {<link rel="stylesheet" type="text/css" href='@routes.Assets.at("stylesheets/navHome.css")'>}{
	@for(mapFollowee: (LocalDateTime, Follows) <- MappingController.mapFollowedUsers(user)) {
		@defining(MappingController.mapNewVisiblePictures(user, mapFollowee._2.getFollowee, mapFollowee._2.getLastProfileView)) { mapFolloweePictures =>
			@if(mapFolloweePictures.size()>0){
				<card class="card feed-card">
					<div class="card-header">
						@layouts.formFields.pictureBox(mapFollowee._2.getFollowee.getProfilePicture, "size-60 circle feed-header mr-3")<a href='@routes.ViewsController.userProfile(mapFollowee._2.getFollowee.getUserName, mapFollowee._2.getFollowee.getUserId)'><h2 class="feed-header">@mapFollowee._2.getFollowee.getUserName</h2></a>
					</div>
					<div class="card-body">
					@for(mapFolloweePictures: (LocalDateTime, Picture) <- MappingController.mapVisiblePictures(user, mapFollowee._2.getFollowee)) {
						@if(mapFolloweePictures._2.getUploadTime.isAfter(mapFollowee._2.getLastProfileView)) {
							@layouts.formFields.pictureBox(mapFolloweePictures._2, "size-150")
						}
					}
					</div>
				</card>
			}
		}
	}
}